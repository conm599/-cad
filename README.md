# CAD图像转换器

一个基于Python的图像转DXF工具，支持多种图像处理功能和自定义选项。

## 功能特性
- **阈值调整**：自定义图像二值化阈值
- **反色功能**：支持黑色背景处理
- **单线条模式**：使用骨架化算法提取单像素线条，优化显示效果
- **忽略边缘**：添加白色边框，分离主体内容和图像边框
- **高精度模式**：
  - 增加曲线数量：可选择8/16/32/48/64倍插值
  - 曲线边缘：使用样条曲线平滑轮廓
- **多图片布局工具**：独立页面，支持多图片上传、拖拽、排序和导出
- **实时预览**：处理前查看效果
- **DXF导出**：生成兼容CAD软件的DXF文件

## 安装方法

### 方法二：从源码运行
1. 克隆仓库：
   ```bash
   git clone github.com/conm599/-cad
   cd cad
   ```

2. 创建虚拟环境：
   ```bash
   python -m venv venv
   # Windows
   venv\Scripts\activate
   # Linux/Mac
   source venv/bin/activate
   ```

3. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```

4. 启动程序：
   ```bash
   python main.py
   ```

5. 在浏览器中访问`http://127.0.0.1:5000`

## 使用说明

1. **上传图片**：点击"加载图片"按钮选择图片文件
2. **调整参数**：
   - 阈值：控制图像二值化的灵敏度
   - 反色：切换黑色/白色背景
   - 单线条模式：提取单像素线条
   - 忽略边缘：添加白色边框
   - 高精度模式：选择增加曲线数量或曲线边缘
3. **预览效果**：点击"更新预览"查看处理效果
4. **导出DXF**：点击"导出DXF"下载文件

### 多图片布局工具

1. 在主页面点击"多图片布局工具"绿色按钮
2. 上传多张图片（可拖拽到页面）
3. 拖拽图片调整位置和顺序
4. 点击"导出图片"下载合成后的图片

## 技术栈

- **Python 3.14**：开发语言
- **Flask**：Web框架
- **OpenCV**：图像处理
- **NumPy**：数值计算
- **ezdxf**：DXF文件生成
- **scikit-image**：骨架化算法
- **scipy**：样条曲线插值
- **PyInstaller**：EXE打包

## 项目结构

```
cad/
├── main.py              # 主程序文件
├── build.py             # 打包脚本（PyInstaller）
├── templates/
│   ├── index.html       # 主前端页面
│   └── multi_image.html # 多图片布局工具
├── requirements.txt     # 依赖列表
├── venv/               # 虚拟环境（可选）
├── README.md           # 项目说明
└── .gitignore          # Git忽略文件
```

## 许可证

MIT License

## 注意事项

- 支持的图像格式：JPG、PNG、BMP等
- 推荐使用分辨率适中的图片
- 单线条模式适合简单图形处理
- 忽略边缘功能有助于在CAD中编辑图像
- 高精度模式会增加DXF文件大小和处理时间
- 多图片布局工具导出的图片使用原始分辨率

## 更新日志

### v1.1.0
- 新增多图片布局工具页面
- 新增单线条模式（使用scikit-image骨架化）
- 新增高精度模式（增加曲线数量/曲线边缘）
- 新增填充颜色功能
- 优化轮廓检测算法
- 更新依赖库（添加scikit-image、scipy）

### v1.0.0
- 初始版本发布
- 支持基本的图像转DXF功能
- 实现忽略边缘功能

